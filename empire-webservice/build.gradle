plugins {
    id 'org.springframework.boot' version '2.0.6.RELEASE'
    id 'com.google.cloud.tools.jib' version '0.10.1'
}

apply plugin: 'org.springframework.boot'

dependencies {
    compile project(':empire-service')
    compile project(':empire-persistence')
    compile project(':empire-feature:empire-feature-web')
    compile group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: "$springBootVersion"
    compile group: 'org.springframework.boot', name: 'spring-boot-starter-security', version: "$springBootVersion"
    compile group: 'org.springframework.boot', name: 'spring-boot-starter-hateoas', version: "$springBootVersion"
    compile group: 'io.springfox', name: 'springfox-swagger-ui', version: "$springFoxVersion"
    compile group: 'io.springfox', name: 'springfox-swagger2', version: "$springFoxVersion"
    testCompile group: 'org.springframework.boot', name: 'spring-boot-starter-test', version: "$springBootVersion"
    testCompile "org.junit.jupiter:junit-jupiter-api:$junitVersion"
    testCompile "org.junit.jupiter:junit-jupiter-engine:$junitVersion"
}

bootJar {
    archiveName = 'empire-server.jar'
}

jib {
    from {
        image = 'openjdk:11.0.1-oracle'
    }
    to {
        image = 'empire-server'
    }
}

build.dependsOn jibBuildTar
